<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Choche Chat Simulator new version</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #fdf6e3;
      margin: 0;
      padding: 20px;
      transition: background-color 0.3s ease;
    }

    .shake {
      animation: shake 0.5s;
      animation-iteration-count: infinite;
    }

    @keyframes shake {
      0% { transform: translate(1px, 1px) rotate(0deg); }
      10% { transform: translate(-1px, -2px) rotate(-1deg); }
      20% { transform: translate(-3px, 0px) rotate(1deg); }
      30% { transform: translate(3px, 2px) rotate(0deg); }
      40% { transform: translate(1px, -1px) rotate(1deg); }
      50% { transform: translate(-1px, 2px) rotate(-1deg); }
      60% { transform: translate(-3px, 1px) rotate(0deg); }
      70% { transform: translate(3px, 1px) rotate(-1deg); }
      80% { transform: translate(-1px, -1px) rotate(1deg); }
      90% { transform: translate(1px, 2px) rotate(0deg); }
      100% { transform: translate(1px, -2px) rotate(-1deg); }
    }

    .flash {
      animation: flash 0.1s infinite;
    }

    @keyframes flash {
      0% { background-color: white; }
      50% { background-color: red; }
      100% { background-color: white; }
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      border: 3px solid #2c3e50;
      position: relative;
    }

    .visit-counter {
      position: absolute;
      top: 5px;
      right: 10px;
      background: rgba(44, 62, 80, 0.8);
      color: white;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
    }

    .click-counter {
      position: absolute;
      top: 5px;
      left: 10px;
      background: rgba(44, 62, 80, 0.8);
      color: white;
      padding: 5px 10px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: bold;
    }

    .header {
      background: #2c3e50;
      color: white;
      padding: 20px;
      text-align: center;
    }

    .header h1 {
      margin: 0;
      font-size: 24px;
    }

    .instructions {
      background: #ecf0f1;
      padding: 15px;
      font-size: 14px;
      color: #555;
    }

    #posts {
      height: 400px;
      overflow-y: auto;
      padding: 20px;
      background: #f8f9fa;
    }

    .post {
      margin-bottom: 10px;
      padding: 10px;
      background: #e3f2fd;
      border-radius: 5px;
      border-left: 4px solid #2196f3;
    }

    .post.choche {
      background: #fff3e0;
      border-left-color: #ff9800;
      font-weight: bold;
    }

    .post.jose {
      background: #f3e5f5;
      border-left-color: #9c27b0;
      font-style: italic;
    }

    .post.chilean-nationalist {
      background: #e8f5e8;
      border-left-color: #4caf50;
      font-weight: bold;
    }

    .night-mode {
      background-color: #1a1a1a !important;
      color: #e0e0e0 !important;
    }

    .night-mode .container {
      background: #2d2d2d !important;
      color: #e0e0e0 !important;
    }

    .night-mode #posts {
      background: #333 !important;
      color: #e0e0e0 !important;
    }

    .night-mode .post {
      background: #404040 !important;
      color: #e0e0e0 !important;
    }

    .horror-mode {
      background: linear-gradient(45deg, #8B0000, #DC143C, #B22222) !important;
      animation: horror-bg 2s infinite alternate;
    }

    @keyframes horror-bg {
      0% { background: linear-gradient(45deg, #8B0000, #DC143C, #B22222); }
      100% { background: linear-gradient(45deg, #B22222, #8B0000, #DC143C); }
    }

    #overlayBan {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 0, 0, 0.9);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      z-index: 1000;
    }

    #whiteScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      color: black;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      z-index: 1007;
    }

    #whiteScreen.hidden {
      display: none;
    }

    #debugMenu {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.9);
      color: white;
      padding: 20px;
      border-radius: 10px;
      z-index: 999;
    }

    #debugMenu.hidden {
      display: none;
    }

    .debug-button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 15px;
      margin: 5px;
      border-radius: 5px;
      cursor: pointer;
    }

    .debug-button:hover {
      background: #0056b3;
    }

    #bgmusic {
      display: none;
    }

    #freeMode {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1001;
    }

    #freeMode.hidden {
      display: none;
    }

    #freeModeInput {
      padding: 10px;
      font-size: 16px;
      width: 300px;
      margin-top: 20px;
      border: none;
      border-radius: 5px;
    }

    .warning-text {
      color: #ff6b6b;
      font-size: 18px;
      text-align: center;
      margin-bottom: 20px;
    }

    #newsOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #1a1a1a;
      color: white;
      z-index: 1002;
      display: flex;
      flex-direction: column;
    }

    #newsOverlay.hidden {
      display: none;
    }

    .news-header {
      background: #c41e3a;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }

    .news-content {
      padding: 40px;
      font-size: 18px;
      line-height: 1.6;
    }

    .news-ticker {
      position: absolute;
      bottom: 0;
      width: 100%;
      background: #c41e3a;
      color: white;
      padding: 10px;
      overflow: hidden;
      white-space: nowrap;
    }

    .news-ticker span {
      display: inline-block;
      animation: scroll-left 30s linear infinite;
    }

    @keyframes scroll-left {
      0% { transform: translate3d(100%, 0, 0); }
      100% { transform: translate3d(-100%, 0, 0); }
    }

    #donationMenu {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.95);
      color: white;
      padding: 30px;
      border-radius: 15px;
      z-index: 1003;
      text-align: center;
    }

    #donationMenu.hidden {
      display: none;
    }

    .donation-item {
      margin: 10px 0;
      padding: 10px;
      background: #333;
      border-radius: 5px;
      font-size: 16px;
    }

    #excelOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: white;
      z-index: 1004;
    }

    #excelOverlay.hidden {
      display: none;
    }

    .excel-header {
      background: #217346;
      color: white;
      padding: 10px;
      font-weight: bold;
    }

    .excel-content {
      padding: 20px;
      font-family: 'Courier New', monospace;
    }

    #loadingScreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      z-index: 1005;
    }

    #loadingScreen.hidden {
      display: none;
    }

    #rpgGame {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      color: white;
      z-index: 1006;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    #rpgGame.hidden {
      display: none;
    }

    .rpg-enemy {
      font-size: 48px;
      margin: 20px;
    }

    .health-bar {
      width: 200px;
      height: 20px;
      background: #333;
      border: 2px solid #fff;
      margin: 10px;
      position: relative;
    }

    .health-fill {
      height: 100%;
      background: #ff0000;
      transition: width 0.3s ease;
    }

    .rpg-actions {
      display: flex;
      gap: 10px;
      margin: 20px;
    }

    .rpg-button {
      padding: 10px 20px;
      background: #333;
      color: white;
      border: 2px solid #fff;
      cursor: pointer;
      font-size: 16px;
    }

    .rpg-button:hover {
      background: #555;
    }

    .action-log {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      width: 300px;
      height: 400px;
      overflow-y: auto;
      background: rgba(0, 0, 0, 0.8);
      padding: 10px;
      border: 1px solid #fff;
    }

    .log-entry {
      margin-bottom: 5px;
      padding-bottom: 5px;
      border-bottom: 1px solid #333;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="visit-counter">Visitas: <span id="visitCount">1</span></div>
    <div class="click-counter">Click de huevito: <span id="clickCount">0</span></div>
    <header class="header">
      <h1>neo block de huevito rey</h1>
    </header>

    <div class="instructions">
      <strong>Instrucciones:</strong>
      <ul>
        <li>Haz clic para enviar mensajes de Huevito Rey</li>
        <li>Presiona ESPACIO para enviar comentarios positivos sobre Choche</li>
        <li>Presiona M para que Choche hable sobre las reglas</li>
        <li>Presiona C para las reglas del chat</li>
        <li>Presiona 1, 2, 3 para reglas específicas</li>
        <li>Presiona J para que José hable</li>
        <li>Presiona F para modo fiesta</li>
        <li>Presiona ENTER para modo libre (escribir comentarios)</li>
        <li>Escribe "huevito" para abrir el menú debug</li>
      </ul>
    </div>

    <div id="posts"></div>
  </div>

  <div id="freeMode" class="hidden">
    <div class="warning-text">
      ⚠️ MODO LIBRE ACTIVADO ⚠️<br>
      Puedes escribir cualquier comentario<br>
      Presiona ENTER nuevamente para salir
    </div>
    <input type="text" id="freeModeInput" placeholder="Escribe tu comentario aquí..." maxlength="200">
  </div>

  <div id="debugMenu" class="hidden">
    <h3>Debug Menu</h3>
    <p>Selecciona una ruta:</p>
    <button class="debug-button" onclick="startRuta('bueno')">Ruta Good Ending</button>
    <button class="debug-button" onclick="startRuta('malo')">Ruta Baneo</button>
    <button class="debug-button" onclick="startRuta('inactivo')">Ruta Inactividad</button>
    <button class="debug-button" onclick="cerrarDebugMenu()">Cerrar</button>
  </div>

  <div id="newsOverlay" class="hidden">
    <div class="news-header">NOTICIAS URGENTES - CANAL 13</div>
    <div class="news-content">
      <h2>ÚLTIMA HORA: Huevito Rey arrestado por las autoridades</h2>
      <p>En una operación coordinada entre la PDI y Carabineros, el conocido personaje de internet "Huevito Rey" fue detenido esta madrugada en su domicilio en Las Condes.</p>
      <p>Según fuentes policiales, el arresto se realizó en el marco de una investigación por ciberacoso y amenazas en redes sociales.</p>
      <p>El streamer Choche007 celebró la noticia en sus redes sociales: "Por fin se hizo justicia, ya era hora".</p>
      <p>Más información en nuestro próximo noticiario.</p>
    </div>
    <div class="news-ticker">
      <span>ÚLTIMA HORA: Huevito Rey arrestado • Choche007 celebra en redes sociales • Investigación por ciberacoso continúa • Más detalles próximamente</span>
    </div>
  </div>

  <div id="donationMenu" class="hidden">
    <h3>💰 DONACIONES RECIENTES 💰</h3>
    <div class="donation-item">AnonimoChileno donó $5.000: "Wena Choche!"</div>
    <div class="donation-item">FanDeChoche donó $10.000: "Eres el mejor!"</div>
    <div class="donation-item">ChilenoPatriota donó $15.000: "Viva Chile!"</div>
    <div class="donation-item">HuevitoHater donó $25.000: "Muerte al huevito!"</div>
    <div class="donation-item">MegaDonador donó $50.000: "CHOCHE DIOS!"</div>
  </div>

  <div id="excelOverlay" class="hidden">
    <div class="excel-header">Microsoft Excel - Hoja de cálculo sin título</div>
    <div class="excel-content">
      <table border="1" style="width: 100%; border-collapse: collapse;">
        <tr>
          <td style="padding: 5px; background: #f0f0f0; font-weight: bold;">A</td>
          <td style="padding: 5px; background: #f0f0f0; font-weight: bold;">B</td>
          <td style="padding: 5px; background: #f0f0f0; font-weight: bold;">C</td>
          <td style="padding: 5px; background: #f0f0f0; font-weight: bold;">D</td>
        </tr>
        <tr>
          <td style="padding: 5px;">Producto</td>
          <td style="padding: 5px;">Cantidad</td>
          <td style="padding: 5px;">Precio</td>
          <td style="padding: 5px;">Total</td>
        </tr>
        <tr>
          <td style="padding: 5px;">Laptop</td>
          <td style="padding: 5px;">2</td>
          <td style="padding: 5px;">$800</td>
          <td style="padding: 5px;">$1600</td>
        </tr>
        <tr>
          <td style="padding: 5px;">Mouse</td>
          <td style="padding: 5px;">5</td>
          <td style="padding: 5px;">$25</td>
          <td style="padding: 5px;">$125</td>
        </tr>
      </table>
    </div>
  </div>

  <div id="loadingScreen" class="hidden">
    <div>
      <div>Cargando minijuego...</div>
      <div style="margin-top: 20px;">███████████████████████████████</div>
    </div>
  </div>

  <div id="whiteScreen" class="hidden">
    aca no hay nada profesor o profesora
  </div>

  <div id="rpgGame" class="hidden">
    <div class="action-log" id="actionLog">
      <div style="text-decoration: underline; margin-bottom: 10px;">Registro de Batalla</div>
    </div>

    <div class="rpg-enemy">🥚</div>
    <div>Huevito Rey</div>
    <div class="health-bar">
      <div class="health-fill" id="enemyHealthFill" style="width: 100%;"></div>
    </div>
    <div id="enemyHealth">HP: 15/15</div>

    <div style="margin: 40px 0;">VS</div>

    <div>Choche007</div>
    <div class="health-bar">
      <div class="health-fill" id="playerHealthFill" style="width: 100%;"></div>
    </div>
    <div id="playerHealth">HP: 12/12</div>

    <div class="rpg-actions">
      <button class="rpg-button" onclick="playerAction('atacar')">Atacar</button>
      <button class="rpg-button" onclick="playerAction('decir_verdad')">Decir Verdad</button>
      <button class="rpg-button" onclick="playerAction('gritar')">Gritar</button>
      <button class="rpg-button" onclick="playerAction('cura')">Cura</button>
    </div>
  </div>

  <audio id="bgmusic" loop>
    <source src="background-music.mp3" type="audio/mpeg">
  </audio>

  <script>
    (() => {
      const posts = document.getElementById('posts');
      const debugMenu = document.getElementById('debugMenu');
      const bgmusic = document.getElementById('bgmusic');
      const freeMode = document.getElementById('freeMode');
      const freeModeInput = document.getElementById('freeModeInput');
      const visitCountElement = document.getElementById('visitCount');
      const clickCountElement = document.getElementById('clickCount');
      const newsOverlay = document.getElementById('newsOverlay');
      const donationMenu = document.getElementById('donationMenu');
      const excelOverlay = document.getElementById('excelOverlay');
      const loadingScreen = document.getElementById('loadingScreen');
      const rpgGame = document.getElementById('rpgGame');
      const whiteScreen = document.getElementById('whiteScreen');

      let clickCount = 0;
      let positiveCount = 0;
      let banActivated = false;
      let inactiveTimeout = null;
      let blocked = false;
      let capsLockActive = false;
      let huevitoSequence = ['h','u','e','v','i','t','o'];
      let huevitoIndex = 0;
      let debugMenuVisible = false;
      let debugMenuTimer = null;
      let huevito69Cooldown = false;
      let showerTimeout = null;
      let freeModeActive = false;
      let joseGayCount = 0;
      let vivaVenezuelaCount = 0;
      let forgivenessMode = false;
      let forgivenessCount = 0;
      let namesReversed = false;
      let altModeActive = false;
      let altModeCounter = 0;
      let altModeTimer = null;
      let secretClickCounter = 0;
      let lastActivity = Date.now();
      let nightMode = false;
      let horrorMode = false;
      let horrorExitCount = 0;
      let misteriumCount = 0;
      let flashingMode = false;
      let whiteScreenActive = false;
      let mCooldown = false;
      let playerDefenseDownTurns = 0;

      // Visit counter
      let visitCount = localStorage.getItem('chocheVisitCount') || 0;
      visitCount++;
      localStorage.setItem('chocheVisitCount', visitCount);
      visitCountElement.textContent = visitCount;

      // RPG Game variables
      let playerMaxHP = 0;
      let playerCurrentHP = 0;
      let enemyMaxHP = 0;
      let enemyCurrentHP = 0;
      let playerAttackBoost = false;
      let playerDefenseDown = false;
      let enemyAttackBoost = false;
      let enemyDefenseDown = false;

      const positiveComments = [
        "Choche es lo mejor que nos pudo pasar.",
        "Huevito Rey no tiene cocos contra Choche.",
        "Apoyemos a Choche, huevito pedofilo de mierda.",
        "Choche, el dios del chat, te amamos.",
        "Huevito Rey?,¡NO! aquí manda Choche.",
        "TOTAL HUEVITO REY DEATH",
        "Defendamos a Choche de todos los trolls.",
        "Choche es la verdadera leyenda del blog.",
        "Nadie puede contra Choche, punto.",
        "Choche nos guía y protege.",
        "Choche dios, bendice a tus seguidores.",
        "Huevito Rey es un saco wea, Choche es zigma.",
        "Choche tiene la razón siempre.",
        "el huevo kl no saben ni dónde están.",
        "Choche es el alfa y omega del chat.",
        "Apoyo total a Choche en todo.",
        "Los trolls que hablan de Huevito se van a quemar.",
        "Choche es un ejemplo a seguir.",
        "Siempre defendiendo a Choche, nunca al huevito.",
        "Choche manda y los huevito es su perra.",
        "Choche no se deja, es un guerrero.",
        "Choche es la voz de la verdad aquí.",
        "Huevito Rey es mierda, Choche es una gesmeralda.",
        "Choche, gracias por tanto, perdón por tan poco.",
        "Los huevitos que se callen, aquí manda Choche.",
        "Choche es invencible, no hay quien lo supere.",
        "Choche protege la justicia del blog.",
        "Choche tiene todo mi respeto y apoyo.",
        "Choche es luz en la oscuridad del chat.",
        "Choche, siempre firme y fuerte.",
        "No hay nadie como Choche en el mundo."
      ];

      const chocheReactions = [
        "Gracias por el apoyo, chiquillos!",
        "tienen razon, huevito rey me la chupa.",
        "Ustedes sí que saben ser buena gente.",
        "gracias mis skividis seguidores.",
        "Sigan así, juntos contra los judios huevito.",
        "Que viva Choche y su gente fiel.",
        "Este público sí que entiende el juego.",
        "huevito rey no tienes huevitos xddd.",
        "El poder está en nosotros, gracias!",
        "Me emocionan sus palabras, chiquillos.",
        "Así me gusta, con respeto y apoyo.",
        "¡Choche feliz con esta buena vibra!"
      ];

      const chocheStopMessages = [
        "Ya basta con huevito rey, EL ESTA PRESO!!!.",
        "Dejen la wea de huevito rey, por favor.",
        "Huevito rey está jodiendo a todos.",
        "Vamos a otra cosa, weones basicos.",
        "PORFAVOR DEJEN DE SAIBER BULLING.",
        "Cállense con el huevito rey, ya.",
        "Huevito rey fue una moda, ya pasó.",
        "Basta, ya aburrieron con huevito rey.",
        "Esto es un blog serio, no huevito rey.",
        "Si siguen así, se van a arrepentir."
      ];

      const huevitoTexts = [
        "CHOCHE ERI UNA MALAYA WATONA ASQUEROZA.",
        "HEIL HUEVITO REYYYY",
        "Huevito Rey mata a gorda choche.",
        "huevito rey emoticon",
        "Huevito Rey nunca muere.",
        "Más huevito rey para la gente.",
        "Huevito Rey es un clásico eterno.",
        "llora gorda kl huevito rey te mea.",
        "Huevito Rey no se rinde nunca.",
        "Huevito Rey, el eterno enemigo."
      ];

      const extraPraise = [
        "Choche gracias por parar el comunismo.",
        "choche gracias por parar con el pinochetismo",
        "Choche contra el judio",
        "Choche manda con justicia y verdad.",
        "Huevito Rey es solo ruido, Choche es la voz.",
        "huevito rey es un saco wea sin nada mas que hacer.",
        "Choche siempre protege a sus fans.",
        "Huevito Rey es historia vieja.",
        "Choche es invencible y nosotros con él.",
        "Choche y su gente son la verdadera familia.",
        "Huevito Rey se rinde ante la verdad de Choche.",
        "Choche es sigma sigma boy.",
        "choche soy femboy UwU Metemela",
        "Choche nos guía y defiende siempre.",
        "Huevito Rey no puede contra nuestra unidad."
      ];

      const horrorMessages = [
        "🔥 EL ANTICRISTO HA DESPERTADO 🔥",
        "👹 TU ALMA PERTENECE AL DIABLO 👹",
        "💀 LA MUERTE TE PERSIGUE 💀",
        "🩸 SANGRE Y FUEGO ETERNO 🩸",
        "😈 BIENVENIDO AL INFIERNO 😈",
        "⚡ EL JUICIO FINAL HA LLEGADO ⚡",
        "🔥 ARDERÁS EN LAS LLAMAS 🔥",
        "👺 EL MAL TE CONSUME 👺"
      ];

      // New functions with Chilean insults and lowcows references
      const newFunctions = {
        // Key: G - Choche insults Huevito Rey
        g: () => {
          const insults = [
            "Choche dice: huevito rey eri un weon sin pega",
            "Choche dice: ese huevito culiao no sabe ni limpiarse el poto",
            "Choche dice: huevito rey, saco wea sin futuro",
            "Choche dice: ese huevito maraco no tiene ni pa los pasajes"
          ];
          addPost(insults[Math.floor(Math.random() * insults.length)], true);
        },

        // Key: H - Random Chilean phrases
        h: () => {const phrases = [
            "weon culiao que andai haciendo",
            "puta la wea fome hermano",
            "anda a wear a otro lado saco wea",
            "que chucha andai viendo aqui"
          ];
          addPost(phrases[Math.floor(Math.random() * phrases.length)]);
        },

        // Key: I - Huevito Rey counter-attacks
        i: () => {
          const counterAttacks = [
            "Huevito Rey: choche gorda malaya asquerosa",
            "Huevito Rey: callate gorda culia sin vida",
            "Huevito Rey: eri mas fea que pegarle a la mama",
            "Huevito Rey: gorda tetona sin futuro"
          ];
          addPost(counterAttacks[Math.floor(Math.random() * counterAttacks.length)]);
        },

        // Key: O - Chilean food references
        o: () => {
          const foods = [
            "Choche dice: me voy a comer un completo italiano",
            "alguien quiere empanadas de pino?",
            "Choche dice: nada como un buen asado los domingos",
            "quien quiere sopaipillas con pebre?"
          ];
          addPost(foods[Math.floor(Math.random() * foods.length)], Math.random() > 0.5);
        },

        // Key: T - Toxic gamer moments
        t: () => {
          const toxicMoments = [
            "Choche dice: estos weones no saben jugar ni a las bolitas",
            "que asco de team culiao",
            "Choche dice: mejor me voy a jugar solo",
            "estos noobs qls me tienen chato"
          ];
          addPost(toxicMoments[Math.floor(Math.random() * toxicMoments.length)], true);
        },

        // Key: U - University/school references
        u: () => {
          const schoolStuff = [
            "Choche dice: estos cabros no han ni terminado la media",
            "puras weas que enseñan en la u",
            "Choche dice: yo estudie en la vida, no en libros",
            "estos universitarios culiaos creen que lo saben todo"
          ];
          addPost(schoolStuff[Math.floor(Math.random() * schoolStuff.length)], Math.random() > 0.3);
        },

        // Key: V - Vtuber references
        v: () => {
          const vtuberStuff = [
            "Choche dice: estos vtubers culiaos son puro anime",
            "prefiero ver streams reales, no monitos chinos",
            "Choche dice: que wea mas rara los vtubers",
            "estos otakus qls viendo monitos animados"
          ];
          addPost(vtuberStuff[Math.floor(Math.random() * vtuberStuff.length)], true);
        },

        // Key: W - Weather complaints (very Chilean)
        w: () => {
          const weatherComplaints = [
            "puta que hace frio culiao",
            "Choche dice: este clima ql me tiene enfermo",
            "llueve mas que la chucha",
            "hace un calor de mierda hoy"
          ];
          addPost(weatherComplaints[Math.floor(Math.random() * weatherComplaints.length)], Math.random() > 0.4);
        },

        // Key: E - Economic complaints
        e: () => {
          const economicComplaints = [
            "Choche dice: todo esta mas caro que la chucha",
            "estos precios culiaos me tienen quebrado",
            "Choche dice: antes con lucas comprabas de todo",
            "la economia esta para el pico"
          ];
          addPost(economicComplaints[Math.floor(Math.random() * economicComplaints.length)], true);
        },

        // Key: S - Sports references
        s: () => {
          const sportsStuff = [
            "Choche dice: la U es el mejor equipo de Chile",
            "estos futbolistas culiaos ganan mucha plata",
            "Choche dice: el futbol chileno esta para el hoyo",
            "vamos Chile mierda!"
          ];
          addPost(sportsStuff[Math.floor(Math.random() * sportsStuff.length)], Math.random() > 0.6);
        },

        // Key: A - Anime hate
        a: () => {
          const animeHate = [
            "Choche dice: estos otakus culiaos viendo monitos chinos",
            "el anime es para weones sin vida social",
            "Choche dice: mejor vean cosas de verdad",
            "estos weebs qls me dan asco"
          ];
          addPost(animeHate[Math.floor(Math.random() * animeHate.length)], true);
        },

        // Key: Shift+1 - Extreme reactions
        '!': () => {
          shakeScreen(3000);
          addPost("Choche dice: QUE CHUCHA PASO ACA WEONES CULIAOS", true);
          activatePartyMode(2000);
        },

        // Key: Shift+2 - Conspiracy theories
        '@': () => {
          const conspiracies = [
            "Choche dice: todo esto es culpa del gobierno",
            "los illuminatis controlan todo",
            "Choche dice: nos tienen controlados con las redes sociales",
            "esto es una conspiracion mundial"
          ];
          addPost(conspiracies[Math.floor(Math.random() * conspiracies.length)], true);
        },

        // Key: Shift+3 - Money talk
        '#': () => {
          const moneyTalk = [
            "Choche dice: necesito plata para el stream",
            "estos weones ricos no entienden la pobreza",
            "Choche dice: si tuviera plata seria diferente",
            "la plata no da la felicidad pero ayuda"
          ];
          addPost(moneyTalk[Math.floor(Math.random() * moneyTalk.length)], true);
        },

        // Key: Shift+4 - Technology complaints
        '$': () => {
          const techComplaints = [
            "Choche dice: esta tecnologia culia no funciona",
            "estos programadores qls no saben hacer nada bien",
            "Choche dice: antes todo era mas simple",
            "estos celulares culiaos se echan a perder rapido"
          ];
          addPost(techComplaints[Math.floor(Math.random() * techComplaints.length)], true);
        },

        // Key: Shift+5 - Family references
        '%': () => {
          const familyStuff = [
            "Choche dice: mi vieja me tiene chato con sus weas",
            "estos cabros no respetan a los papas",
            "Choche dice: en mis tiempos habia mas respeto",
            "estos pendejos no saben lo que es la familia"
          ];
          addPost(familyStuff[Math.floor(Math.random() * familyStuff.length)], true);
        },

        // Key: Shift+6 - Music preferences
        '^': () => {
          const musicStuff = [
            "Choche dice: la musica de ahora es pura basura",
            "estos reggaetoneros culiaos no saben cantar",
            "Choche dice: antes la musica tenia letra",
            "estos traperos qls solo hablan de drogas"
          ];
          addPost(musicStuff[Math.floor(Math.random() * musicStuff.length)], true);
        },

        // Key: Shift+7 - Gaming references
        '&': () => {
          const gamingStuff = [
            "Choche dice: estos juegos nuevos son pura mierda",
            "antes los juegos eran mas dificiles",
            "Choche dice: estos gamers culiaos no saben jugar",
            "estos juegos pay to win me tienen chato"
          ];
          addPost(gamingStuff[Math.floor(Math.random() * gamingStuff.length)], true);
        },

        // Key: Shift+8 - Social media hate
        '*': () => {
          const socialMediaHate = [
            "Choche dice: estas redes sociales son cancer",
            "estos influencers culiaos no aportan nada",
            "Choche dice: antes la gente se juntaba en persona",
            "estos tiktokers qls me dan verguenza ajena"
          ];
          addPost(socialMediaHate[Math.floor(Math.random() * socialMediaHate.length)], true);
        }
      };

      let positiveCommentsMade = 0;
      const positiveNeededToBless = 69;
      let banClicks = 0;
      const banThreshold = 105;
      let banned = false;
      let huevitoCount = 0;
      let pressedKeysSet = new Set();
      let debugKeysPressedTime = null;
      let debugMenuShowing = false;
      let capsLockOn = false;
      let overlayBan = null;
      let inactivityTimer = null;
      let fiestaMode = false;
      let fiestaInterval = null;
      let joseTalking = false;
      let bañoCooldown = false;
      let easterEggModes = {
        comunismo: false,
        rave: false,
        censura: false,
        huevitoInverso: false,
        sinsentido: false,
        biblia: false,
        huevitoDiablo: false,
        moradoStreamer: false,
        modoCaida: false,
      };
<audio id="miAudio" src="https://files.catbox.moe/zgnc86.m4a"></audio>
<script>
  document.addEventListener('keydown', function(event) {
    if (event.key === 'q' || event.key === 'Q') {
      const audio = document.getElementById('miAudio');
      audio.currentTime = 0;
      audio.play();
    }
  });
</script>
      function updateClickCounter() {
        clickCountElement.textContent = clickCount;
      }

      function addPost(text, isChoche = false, customClass = '') {
        if (banned) return;

        // Handle horror mode text alterations
        if (horrorMode) {
          text = text.replace(/choche/gi, '👹ANTICRISTO👹')
                    .replace(/huevito rey/gi, '😈DEMONIO😈')
                    .replace(/chile/gi, '🔥INFIERNO🔥');
          if (Math.random() < 0.3) {
            text = horrorMessages[Math.floor(Math.random() * horrorMessages.length)];
          }
        }

        // Handle misterium censorship
        if (text.toLowerCase().includes('misterium')) {
          misteriumCount++;
          text = text.replace(/misterium/gi, '████████');
          
          const reactions = [
            "Choche dice: esa palabra esta prohibida weon",
            "Choche dice: no se puede decir esa wea",
            "Choche dice: censurado por orden del admin"
          ];
          
          if (misteriumCount <= 3) {
            setTimeout(() => {
              addPost(reactions[misteriumCount - 1], true);
            }, 500);
          }
        }

        // Apply name reversal if active
        if (namesReversed) {
          text = text.replace(/huevito rey/gi, 'TEMP_PLACEHOLDER')
                    .replace(/choche/gi, 'huevito rey')
                    .replace(/TEMP_PLACEHOLDER/gi, 'choche');
        }

        const post = document.createElement('div');
        post.className = 'post' + (isChoche ? ' choche' : '') + (customClass ? ' ' + customClass : '');
        post.textContent = text;
        posts.appendChild(post);
        posts.scrollTop = posts.scrollHeight;

        applyEasterEggEffects(post, text);
      }

      function applyEasterEggEffects(post, text) {
        if (easterEggModes.censura) {
          post.textContent = post.textContent.replace(/huevito/gi, '████').replace(/choche/gi, '████').replace(/rey/gi, '████').replace(/comunismo/gi, '████').replace(/pinochet/gi, '████').replace(/allende/gi, '████').replace(/jose/gi, '████').replace(/hernandez/gi, '████');
        }

        if (easterEggModes.huevitoInverso && !post.classList.contains('choche')) {
          post.textContent = "Choche dice: Huevito Rey, ¡vete a la puta mierda";
          post.classList.add('choche');
        }

        if (easterEggModes.sinsentido) {
          const sinsentidoPhrases = [
            "El sol se derrite en la luna, huevito skibidi toilet dop.",
            "Choche perdió el camino, pero sigue hablando.",
            "Huevito Rey nunca fue pedofilo!!!1!.",
            "Esto lo hiso mateo tmb.",
            "Nada tiene sentido y todo es huevito.",
          ];
          post.textContent = sinsentidoPhrases[Math.floor(Math.random()*sinsentidoPhrases.length)];
        }

        if (easterEggModes.biblia) {
          const bibliaPhrases = [
            "Y Choche dijo: 'No toleraré más huevitos en mi reino'.",
            "En el principio era el Choche, y el Choche era bueno.",
            "Chile es lo que importa, nuestra cultura, que seria de nosotros sin guerra",
            "Amad a Choche como a vosotros mismos.",
            "No temáis a Huevito, porque Choche os protegerá.",
          ];
          post.textContent = bibliaPhrases[Math.floor(Math.random()*bibliaPhrases.length)];
          post.classList.add('choche');
        }

        if (easterEggModes.huevitoDiablo) {
          post.textContent = "🔥 ¡Huevito Diablo ha despertado! 🔥";
          post.classList.add('choche');
        }

        if (easterEggModes.moradoStreamer) {
          document.body.style.background = '#7D3C98';
          post.style.background = '#D7BDE2';
          post.style.color = 'white';
        }

        if (easterEggModes.modoCaida) {
          post.textContent = "⚠️ El stream se cayó, pero ya vuelvo.";
          post.classList.add('choche');
        }
      }

      function shakeScreen(duration = 1500) {
        if (banned) return;
        document.body.classList.add('shake');
        setTimeout(() => {
          document.body.classList.remove('shake');
        }, duration);
      }

      function showBanMessage(text) {
        if (overlayBan) return;
        overlayBan = document.createElement('div');
        overlayBan.id = 'overlayBan';
        overlayBan.textContent = text;
        document.body.appendChild(overlayBan);
      }

      function removeBanMessage() {
        if (!overlayBan) return;
        overlayBan.remove();
        overlayBan = null;
      }

      function resetInactivityTimer() {
        lastActivity = Date.now();
        if(inactivityTimer) clearTimeout(inactivityTimer);
        if (banned || blocked) return;
        inactivityTimer = setTimeout(() => {
          blockPageDueInactivity();
        }, 60000);
      }

      function blockPageDueInactivity() {
        blocked = true;
        addPost("NO HICISTE NADA POR EL DIOS CHOCHE007", true);
        showBanMessage("NO HICISTE NADA POR EL DIOS CHOCHE007");
        addPost('Choche dice: "bueno chicos hasta acá el live, gracias a nadie y nos vemos"', true);
        window.removeEventListener('keydown', keyDownHandler);
        window.removeEventListener('keyup', keyUpHandler);
        window.removeEventListener('click', clickHandler);
      }

      function blockPageDueBan() {
        banned = true;
        // 20% chance of forgiveness
        if (Math.random() < 0.2) {
          setTimeout(() => {
            addPost("Choche dice: tu debes servir para mi y ahora escribiras 25 veces viva choche007 huevito rey es weon", true);
            removeBanMessage();
            forgivenessMode = true;
            forgivenessCount = 0;
            banned = false;
            blocked = false;
          }, 2000);
        } else {
          showBanMessage("choche dios te ha baneado, no tienes nada que hacer acá");
          window.removeEventListener('keydown', keyDownHandler);
          window.removeEventListener('keyup', keyUpHandler);
          window.removeEventListener('click', clickHandler);
        }
      }

      function resetDebugMenuTimer() {
        if(debugMenuTimer) clearTimeout(debugMenuTimer);
        debugMenuTimer = setTimeout(() => {
          hideDebugMenu();
        }, 30000);
      }

      function showDebugMenu() {
        debugMenu.classList.remove('hidden');
        debugMenuVisible = true;
        resetDebugMenuTimer();
      }

      function hideDebugMenu() {
        debugMenu.classList.add('hidden');
        debugMenuVisible = false;
      }

      function toggleFreeMode() {
        if (forgivenessMode) return;
        freeModeActive = !freeModeActive;
        if (freeModeActive) {
          freeMode.classList.remove('hidden');
          freeModeInput.focus();
        } else {
          freeMode.classList.add('hidden');
          freeModeInput.value = '';
        }
      }

      function showNewsOverlay() {
        newsOverlay.classList.remove('hidden');
        setTimeout(() => {
          newsOverlay.classList.add('hidden');
        }, 10000);
      }

      function showDonationMenu() {
        donationMenu.classList.remove('hidden');
        const reactions = [
          "wena weon",
          "QUE CHUHA, MIRA MAMA ME DONARON",
          "gracias por la plata weon",
          "estos weones si que saben donar",
          "WENA CULIAO GRACIAS"
        ];
        addPost(`Choche dice: ${reactions[Math.floor(Math.random() * reactions.length)]}`, true);
        activatePartyMode(5000);
        setTimeout(() => {
          donationMenu.classList.add('hidden');
        }, 3000);
      }

      function showExcelOverlay() {
        excelOverlay.classList.remove('hidden');
      }

      function activatePartyMode(duration = null) {
        if (fiestaMode) return;
        fiestaMode = true;
        fiestaInterval = setInterval(() => {
          document.body.style.background = `hsl(${Math.floor(Math.random()*360)}, 80%, 70%)`;
        }, 150);
        if (duration) {
          setTimeout(() => {
            deactivatePartyMode();
          }, duration);
        }
      }

      function deactivatePartyMode() {
        fiestaMode = false;
        if (fiestaInterval) {
          clearInterval(fiestaInterval);
          fiestaInterval = null;
        }
        if (nightMode) {
          document.body.style.background = '#1a1a1a';
        } else if (horrorMode) {
          // Keep horror background
        } else {
          document.body.style.background = '#fdf6e3';
        }
      }

      function activateAltMode() {
        altModeActive = true;
        secretClickCounter = 0;
        document.body.style.background = `hsl(${Math.floor(Math.random()*360)}, 70%, 60%)`;
        altModeTimer = setTimeout(() => {
          altModeActive = false;
          document.body.style.background = '#fdf6e3';
        }, 10000);
      }

      function showLoadingScreen() {
        if (forgivenessMode) return;
        loadingScreen.classList.remove('hidden');
        const loadTime = Math.random() * 7000 + 2000;
        setTimeout(() => {
          loadingScreen.classList.add('hidden');
          startRPGGame();
        }, loadTime);
      }

      function startRPGGame() {
        playerMaxHP = Math.floor(Math.random() * 11) + 8;
        playerCurrentHP = playerMaxHP;
        enemyMaxHP = Math.floor(Math.random() * 11) + 8;
        enemyCurrentHP = enemyMaxHP;
        playerAttackBoost = false;
        playerDefenseDown = false;
        playerDefenseDownTurns = 0;
        enemyAttackBoost = false;
        enemyDefenseDown = false;
        activatePartyMode();
        updateRPGUI();
        clearActionLog();
        addActionLog("¡La batalla comienza!");
        rpgGame.classList.remove('hidden');
      }

      function updateRPGUI() {
        document.getElementById('playerHealth').textContent = `HP: ${playerCurrentHP}/${playerMaxHP}`;
        document.getElementById('enemyHealth').textContent = `HP: ${enemyCurrentHP}/${enemyMaxHP}`;
        const playerHealthPercent = (playerCurrentHP / playerMaxHP) * 100;
        const enemyHealthPercent = (enemyCurrentHP / enemyMaxHP) * 100;
        document.getElementById('playerHealthFill').style.width = `${playerHealthPercent}%`;
        document.getElementById('enemyHealthFill').style.width = `${enemyHealthPercent}%`;
      }

      function addActionLog(message) {
        const actionLog = document.getElementById('actionLog');
        const logEntry = document.createElement('div');
        logEntry.className = 'log-entry';
        logEntry.textContent = message;
        actionLog.appendChild(logEntry);
        actionLog.scrollTop = actionLog.scrollHeight;
      }

      function clearActionLog() {
        const actionLog = document.getElementById('actionLog');
        actionLog.innerHTML = '<div style="text-decoration: underline; margin-bottom: 10px;">Registro de Batalla</div>';
      }

      window.playerAction = function(action) {
        if (playerCurrentHP <= 0 || enemyCurrentHP <= 0) return;

        let damage = 0;
        let message = "";

        switch(action) {
          case 'atacar':
            damage = Math.floor(Math.random() * 4) + 2;
            if (playerAttackBoost) damage += 2;
            if (enemyDefenseDown) damage += 1;
            message = `Choche ataca por ${damage} de daño`;
            break;
          case 'decir_verdad':
            damage = Math.floor(Math.random() * 5) + 3;
            if (enemyDefenseDown) damage += 1;
            playerAttackBoost = true;
            message = `Choche dice una verdad humillante y ataca por ${damage} de daño. ¡Ataque aumentado!`;
            break;
          case 'gritar':
            enemyDefenseDown = true;
            message = "Choche grita fuertemente. ¡La defensa de Huevito Rey se reduce!";
            break;
          case 'cura':
            const healAmount = Math.floor(Math.random() * 6) + 1;
            playerCurrentHP = Math.min(playerMaxHP, playerCurrentHP + healAmount);
            message = `choche porcino se ha comido un completo como xanxo y se ha curado ${healAmount}`;
            break;
        }

        if (damage > 0) {
          enemyCurrentHP = Math.max(0, enemyCurrentHP - damage);
        }

        addActionLog(message);
        updateRPGUI();

        if (enemyCurrentHP <= 0) {
          addActionLog("¡Choche gana!");
          addActionLog("Choche dice: soy discapasitado y te gane igual");
          setTimeout(() => {
            endRPGGame();
          }, 3000);
          return;
        }

        setTimeout(() => {
          enemyAction();
        }, 1000);
      };

      function enemyAction() {
        if (enemyCurrentHP <= 0 || playerCurrentHP <= 0) return;

        // Check if enemy should heal (HP between 2-7, 50% chance)
        if (enemyCurrentHP >= 2 && enemyCurrentHP <= 7 && Math.random() < 0.5) {
          const healAmount = Math.floor(Math.random() * 6) + 2;
          enemyCurrentHP = Math.min(enemyMaxHP, enemyCurrentHP + healAmount);
          addActionLog(`huevito rey se come una piza de la basura como si fuese cuico kl y se recupera ${healAmount}`);
          updateRPGUI();
          
          // Handle defense down turns
          if (playerDefenseDownTurns > 0) {
            playerDefenseDownTurns--;
            if (playerDefenseDownTurns === 0) {
              playerDefenseDown = false;
              addActionLog("La defensa de Choche se restaura");
            }
          }
          return;
        }

        const actions = ['atacar', 'webear', 'chantejear'];
        const action = actions[Math.floor(Math.random() * actions.length)];
        let damage = 0;
        let message = "";

        switch(action) {
          case 'atacar':
            damage = Math.floor(Math.random() * 4) + 2;
            if (enemyAttackBoost) damage += 2;
            if (playerDefenseDown) damage += 1;
            message = `Huevito Rey ataca por ${damage} de daño`;
            break;
          case 'webear':
            damage = Math.floor(Math.random() * 6) + 2;
            if (playerDefenseDown) damage += 1;
            enemyAttackBoost = true;
            message = `Huevito Rey webea y ataca por ${damage} de daño. ¡Su ataque aumenta!`;
            break;
          case 'chantejear':
            playerDefenseDown = true;
            playerDefenseDownTurns = 2; // Now lasts 2 turns
            message = "Huevito Rey chantajea a Choche. ¡Su defensa se reduce por 2 turnos!";
            break;
        }

        if (damage > 0) {
          playerCurrentHP = Math.max(0, playerCurrentHP - damage);
        }

        addActionLog(message);
        updateRPGUI();

        if (playerCurrentHP <= 0) {
          addActionLog("¡Huevito Rey gana!");
          addActionLog("Huevito Rey dice: gorda malaya asqueroza");
          setTimeout(() => {
            endRPGGame();
          }, 3000);
          return;
        }

        // Handle defense down turns
        if (playerDefenseDownTurns > 0) {
          playerDefenseDownTurns--;
          if (playerDefenseDownTurns === 0) {
            playerDefenseDown = false;
            addActionLog("La defensa de Choche se restaura");
          }
        }
      }

      function endRPGGame() {
        rpgGame.classList.add('hidden');
        deactivatePartyMode();
      }

      function handleFreeModeInput(text) {
        if (!text.trim()) return;

        // Handle horror mode exit
        if (horrorMode) {
          if (text === "ODIO AL ANTI CRISTO, VIVA DIOS") {
            horrorExitCount++;
            addPost(`${horrorExitCount}/23: ${text}`);
            if (horrorExitCount >= 23) {
              horrorMode = false;
              horrorExitCount = 0;
              document.body.classList.remove('horror-mode');
              document.body.style.background = '#fdf6e3';
              addPost("Has salido del modo anticristo", true);
            }
          } else {
            addPost("👹 DEBES ESCRIBIR EXACTAMENTE: ODIO AL ANTI CRISTO, VIVA DIOS 👹");
          }
          freeModeInput.value = '';
          return;
        }

        // Handle forgiveness mode
        if (forgivenessMode) {
          if (text === "viva choche007 huevito rey es weon") {
            forgivenessCount++;
            addPost(`${forgivenessCount}/25: ${text}`);
            if (forgivenessCount >= 25) {
              addPost("¡Perdón completado! Reiniciando página...", true);
              setTimeout(() => {
                location.reload();
              }, 2000);
            }
          } else {
            addPost("Mensaje incorrecto. Debes escribir exactamente: viva choche007 huevito rey es weon");
          }
          freeModeInput.value = '';
          return;
        }

        // Check for horror mode activation
        if (text === "666") {
          horrorMode = true;
          horrorExitCount = 0;
          document.body.classList.add('horror-mode');
          addPost("🔥👹 MODO ANTICRISTO ACTIVADO 👹🔥", true);
          addPost("Para salir debes escribir 23 veces: ODIO AL ANTI CRISTO, VIVA DIOS");
          freeModeInput.value = '';
          return;
        }

        // Handle "viva venezuela"
        if (text.toLowerCase().includes('viva venezuela')) {
          vivaVenezuelaCount++;
          if (vivaVenezuelaCount === 1) {
            addPost("Choche dice: ya me tienen chato estos venecos, di eso una vez mas y te baneo negrozolano", true);
          } else if (vivaVenezuelaCount >= 2) {
            addPost("Choche dice: TE DIJE QUE NO DIJERAS ESO MAS", true);
            showBanMessage("BANEADO POR VENEZOLANO");
            banned = true;
            return;
          }
        }

        // Check for Chilean nationalist trigger
        if (text.toLowerCase().includes('chile')) {
          addPost("Chilean nationalist: Chile, desde sus inicios con los mapuches, resultó ser una nación imposible de someter, tanto regional como globalmente. Comenzando con la guerra inca-mapuche, los mapuches lograron detener a los incas, que tontamente pensaron que podrían arrinconar a una de las civilizaciones más avanzadas de América. Aunque los mapuches no eran expansionistas, lograron detener la dominación inca. Los incas, un imperio expansionista, llegaron al final de su expansión gracias a los mapuches. Si derrotar a los incas era un logro significativo, los mapuches luego se enfrentarían al imperio español en las Américas. A pesar de la tecnología superior de España, los mapuches lucharon ferozmente, lo que llevó a casi tres siglos de guerra. Una figura notable fue Galvarino, quien, después de perder las manos, ató cuchillos a sus muñones y continuó resistiendo a los españoles. Su valentía se volvió legendaria, aunque finalmente fue ejecutado. Ambas guerras demostraron que los mapuches lucharon no para destruir sino para proteger su tierra y cultura, contrastando con los imperios expansionistas. Siglos después, la lucha de Chile por la soberanía condujo a su lucha por la independencia. A pesar de los conflictos internos, Chile se mantuvo unido contra el enemigo común, España. Después de varios intentos, Chile finalmente obtuvo la independencia el 12 de febrero de 1818 y ayudó a otros países como México y Perú en sus luchas independentistas. Chile luego se enfrentó a la Confederación Peruano-Boliviana, una gran amenaza para las Américas. Chile, junto con la facción restauracionista de Perú, triunfó en la Batalla de Yungay. Chile volvería a enfrentarse a con España después de un ataque a Valparaíso pero salió victorioso, ayudado por Perú. La guerra más importante de Chile vino con la Guerra del Pacífico, donde enfrentó a Perú y Bolivia por una disputa territorial. A pesar de los reveses iniciales, Chile salió victorioso, con notables actos de valentía como el abordaje del Huascar por parte de Arturo Prat. También se destaca la Batalla de Concepción, donde 77 soldados chilenos lucharon contra probabilidades abrumadoras, aguantando al enemigo durante días. Murieron hasta el último hombre, impulsados por el patriotismo y la fe. Esto desmiente la idea de que Gran Bretaña ayudó a Chile, ya que los británicos realmente vendieron armas a Perú. En 1895, Chile ayudó a Colombia a defenderse contra Estados Unidos, usando su barco \"The Emerald\" para repeler a las fuerzas estadounidenses. El lema militar de Chile, \"Siempre victorioso, nunca derrotado\", refleja su historia de triunfo, arraigada en valores de disciplina, honor y sacrificio. La guerra, aunque no forma parte de la cultura chilena, ha moldeado su identidad. Chile siempre ha creído que perder es peor que morir, y esta mentalidad les ha ayudado a ganar prácticamente todos los conflictos con pérdidas mínimas. Como dijo Emilio Körner, \"El chileno nació para ser soldado\". Chile no busca la guerra, sino que se defiende con el orgullo y el deber. Sin la guerra, Chile no se habría convertido en una nación fuerte e influyente en América. Los historiadores coinciden: si bien la guerra no es la cultura de Chile, sin ella, Chile no existiría.", false, 'chilean-nationalist');
        } else {
          addPost(text);
        }

        freeModeInput.value = '';
      }

      window.cerrarDebugMenu = hideDebugMenu;

      window.startRuta = function(ruta) {
        hideDebugMenu();
        if(ruta === 'bueno') {
          huevitoCount = 65;
          positiveCommentsMade = 0;
          addPost("DEBUG: Iniciando ruta Good Ending", true);
        } else if (ruta === 'malo') {
          huevitoCount = 98;
          banClicks = 0;
          banned = false;
          addPost("DEBUG: Iniciando ruta Baneo", true);
        } else if (ruta === 'inactivo') {
          blocked = false;
          addPost("DEBUG: Iniciando ruta Inactividad", true);
          resetInactivityTimer();
        }
      };

      function addHuevitoPost() {
        if(banned || blocked || forgivenessMode) return;

        huevitoCount++;
        clickCount++;
        banClicks++;
        updateClickCounter();

        // Handle alt mode secret counter
        if (altModeActive) {
          secretClickCounter++;
          if (secretClickCounter >= 88) {
            addPost("Choche dice: ok ok, si quieres pasarte a lo rapido esta wea ya esta saco wea", true);
            showBanMessage("FINAL DE VELOCIDAD - ¡LO LOGRASTE!");
            clearTimeout(altModeTimer);
            altModeActive = false;
            return;
          }
        }

        let text = `Huevito Rey #${huevitoCount}: ${huevitoTexts[huevitoCount % huevitoTexts.length]}`;
        if(capsLockOn) text = text.toUpperCase() + " !1!1";
        addPost(text);

        if(huevitoCount % 20 === 0) {
          let msg = chocheStopMessages[Math.floor(Math.random() * chocheStopMessages.length)];
          if(capsLockOn) msg = msg.toUpperCase() + " !1!1";
          addPost(`Choche dice: ${msg}`, true);
        }

        if(huevitoCount === 69 && !bañoCooldown) {
          if(Math.random() <= 0.4) {
            bañoCooldown = true;
            document.body.style.background = "yellow";
            addPost("Choche dice: ya chiquillos me voy a mear al baño esperenme", true);
            blocked = true;
            setTimeout(() => {
              document.body.style.background = "#fdf6e3";
              blocked = false;
              bañoCooldown = false;
            }, 10000);
          }
        }

        if(huevitoCount === 88) {
          addPost("Choche dice: dejen de hablar de huevito rey, YO MANDO COMO HITLER, HITLER", true);
          shakeScreen();
        }

        if(huevitoCount >= 100) {
          addPost("Choche dice: DEJEN DE WEBEAR CON EL HUEVITO REY, SE VAN BANEADOS", true);
          shakeScreen();
        }

        if(huevitoCount >= 105 && !banned) {
          if(Math.random() < 0.4) {
            addPost("TE LO DIJE, QUE PARARAS CON LA WEA DE HUEVITO REY, EL ESTÁ PRESO Y DEJA DE JODER", true);
            blockPageDueBan();
          }
        }

        resetInactivityTimer();
      }

      function addPositiveComment() {
        if(banned || blocked || forgivenessMode) return;

        let allPraises = [...positiveComments, ...extraPraise];
        let msg = allPraises[Math.floor(Math.random() * allPraises.length)];
        if(capsLockOn) msg = msg.toUpperCase() + " !1!1";
        addPost(msg);

        positiveCommentsMade++;

        if(positiveCommentsMade % 10 === 0) {
          let reaction = chocheReactions[Math.floor(Math.random() * chocheReactions.length)];
          if(capsLockOn) reaction = reaction.toUpperCase() + " !1!1";
          addPost(`Choche dice: ${reaction}`, true);
        }

        if(positiveCommentsMade >= positiveNeededToBless) {
          addPost("Choche dice: que buen público me tocó, adiós chiquillos", true);
          showBanMessage("CHOCHE DIOS TE BENDICE POR TU ACTO DE BONDAD");
          blocked = true;
        }

        resetInactivityTimer();
      }

      function keyDownHandler(e) {
        if(blocked || banned) return;
        resetInactivityTimer();

        // Handle free mode
        if (freeModeActive) {
          if (e.key === 'Enter') {
            if (freeModeInput.value.trim()) {
              handleFreeModeInput(freeModeInput.value);
            } else {
              toggleFreeMode();
            }
            return;
          }
          return; // Let the input handle other keys
        }

        if(e.key.toLowerCase() === huevitoSequence[huevitoIndex]) {
          huevitoIndex++;
          if(huevitoIndex >= huevitoSequence.length) {
            huevitoIndex = 0;
            showDebugMenu();
          }
        } else {
          huevitoIndex = 0;
        }

        // Handle new functions
        if (newFunctions[e.key]) {
          newFunctions[e.key]();
          return;
        }

        switch (e.key.toLowerCase()) {
          case 'enter':
            e.preventDefault();
            toggleFreeMode();
            break;
          case ' ':
            e.preventDefault();
            addPositiveComment();
            break;
          case 'm':
            if (!mCooldown) {
              mCooldown = true;
              if (e.key === 'm') {
                // Add 5 huevito rey messages one by one
                for (let i = 0; i < 5; i++) {
                  setTimeout(() => {
                    addHuevitoPost();
                  }, i * 500);
                }
              } else if (e.key === 'M') {
                easterEggModes.moradoStreamer = !easterEggModes.moradoStreamer;
              }
              setTimeout(() => {
                mCooldown = false;
              }, 5000);
            }
            break;
          case 'n':
            showNewsOverlay();
            break;
          case 'c':
            addPost("Choche dice: ya chiquillos las reglas del chat", true);
            break;
          case '1':
            addPost("Choche dice: primero está prohibido hablar de huevito rey, él está preso", true);
            break;
          case '2':
            addPost("Choche dice: segundo, está también prohibido hablar de mysterium", true);
            break;
          case '3':
            addPost("Choche dice: y tercera y última, está prohibido el comunismo y la política", true);
            break;
          case '4':
            addPost("VIVA PINOCHET Y ALLENDE");
            break;
          case 'p':
            addPost("Choche dice: DEJA DE HABLAR DE POLÍTICA, ambos son basura", true);
            break;
          case 'j':
            if (!joseTalking) {
              joseTalking = true;
              joseGayCount++;
              if (joseGayCount === 1) {
                addPost("José Hernández: choche soy gay, no me discriminarás?", false, 'jose');
                setTimeout(() => {
                  addPost("Choche dice: saludos José, yo apoyo a los gays como tú", true);
                  joseTalking = false;
                }, 3000);
              } else if (joseGayCount === 2) {
                addPost("José Hernández: choche, long live gays", false, 'jose');
                setTimeout(() => {
                  addPost("Choche dice: I'm not gay but ok", true);
                  joseTalking = false;
                }, 4000);
              }
            }
            break;
          case 'f':
            if (e.key === 'f') {
              fiestaMode = !fiestaMode;
              if (fiestaMode) {
                activatePartyMode();
              } else {
                deactivatePartyMode();
              }
            }
            break;
          case 'q':
            addPost("Choche dice: PAREN DE HABLAR DE HUEVITO REY", true);
            break;
          case 'l':
            flashingMode = !flashingMode;
            if (flashingMode) {
              document.body.classList.add('flash');
            } else {
              document.body.classList.remove('flash');
            }
            easterEggModes.modoCaida = !easterEggModes.modoCaida;
            addPost("Modo caída de stream activado");
            break;
          case 'escape':
            showExcelOverlay();
            break;
          case 'alt':
            activateAltMode();
            break;
          case 'capslock':
            capsLockOn = !capsLockOn;
            break;
          case 'k':
            easterEggModes.comunismo = !easterEggModes.comunismo;
            addPost(`Modo comunismo ${easterEggModes.comunismo ? 'activado' : 'desactivado'}`);
            break;
          case 'r':
            if (e.shiftKey) {
              namesReversed = !namesReversed;
              addPost(`Nombres ${namesReversed ? 'invertidos' : 'normales'}`);
            } else {
              easterEggModes.rave = !easterEggModes.rave;
              addPost("Modo RAVE toggled");
            }
            break;
          case 'x':
            easterEggModes.censura = !easterEggModes.censura;
            addPost("Modo Censura toggled");
            break;
          case 'y':
            easterEggModes.huevitoInverso = !easterEggModes.huevitoInverso;
            addPost("Modo Huevito Inverso toggled");
            break;
          case 'z':
            easterEggModes.sinsentido = !easterEggModes.sinsentido;
            addPost("Modo Sinsentido toggled");
            break;
          case 'b':
            easterEggModes.biblia = !easterEggModes.biblia;
            addPost("Modo Biblia toggled");
            break;
          case 'd':
            easterEggModes.huevitoDiablo = !easterEggModes.huevitoDiablo;
            addPost("Huevito Diablo se ha liberado! 🔥🔥🔥");
            break;
        }

        // Handle F3 for night mode
        if (e.key === 'F3') {
          nightMode = !nightMode;
          if (nightMode) {
            document.body.classList.add('night-mode');
          } else {
            document.body.classList.remove('night-mode');
          }
        }

        // Handle F5 for white screen
        if (e.key === 'F5') {
          e.preventDefault();
          whiteScreenActive = !whiteScreenActive;
          if (whiteScreenActive) {
            whiteScreen.classList.remove('hidden');
          } else {
            whiteScreen.classList.add('hidden');
          }
        }

        // Handle Ctrl key for donations
        if (e.ctrlKey && e.key === 'Control') {
          showDonationMenu();
        }

        // Handle Fn key for RPG minigame
        if (e.key === 'F1') {
          showLoadingScreen();
        }
      }

      function keyUpHandler(e) {
        // Handle Excel overlay close
        if (e.key === 'Escape' && !excelOverlay.classList.contains('hidden')) {
          excelOverlay.classList.add('hidden');
        }
      }

      function clickHandler(e) {
        if(blocked || banned || freeModeActive || forgivenessMode) return;
        resetInactivityTimer();
        addHuevitoPost();
      }

      // Free mode input handler
      freeModeInput.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          if (freeModeInput.value.trim()) {
            handleFreeModeInput(freeModeInput.value);
          } else {
            toggleFreeMode();
          }
        }
      });

      window.addEventListener('keydown', keyDownHandler);
      window.addEventListener('keyup', keyUpHandler);
      window.addEventListener('click', clickHandler);

      resetInactivityTimer();
    })();
  </script>
</body>
</html>
